# encoding: UTF-8

namespace :data_migration do

  desc "Set the published_at dates for all published editions"
  task :populate_publish_dates => :environment do
    {
      'Afghanistan' => '2013-02-18',
      'Albania' => '2013-01-22',
      'Algeria' => '2013-03-19',
      'American Samoa' => '2012-12-18',
      'Andorra' => '2012-12-13',
      'Angola' => '2013-03-14',
      'Anguilla' => '2012-12-19',
      'Antigua and Barbuda' => '2013-03-11',
      'Argentina' => '2013-02-20',
      'Armenia' => '2013-02-14',
      'Aruba' => '2012-12-19',
      'Australia' => '2013-02-21',
      'Austria' => '2013-03-07',
      'Azerbaijan' => '2013-02-27',
      'Bahamas' => '2013-01-04',
      'Bahrain' => '2013-03-21',
      'Bangladesh' => '2013-03-15',
      'Barbados' => '2013-03-21',
      'Belarus' => '2013-03-14',
      'Belgium' => '2013-01-24',
      'Belize' => '2013-01-24',
      'Benin' => '2013-03-19',
      'Bermuda' => '2013-03-19',
      'Bhutan' => '2012-12-20',
      'Bolivia' => '2013-03-21',
      'Bonaire/St Eustatius/Saba' => '2012-12-21',
      'Bosnia and Herzegovina' => '2013-01-09',
      'Botswana' => '2013-01-10',
      'Brazil' => '2013-03-21',
      'British Antarctic Territory' => '2013-02-05',
      'British Indian Ocean Territory' => '2013-03-21',
      'British Virgin Islands' => '2013-03-15',
      'Brunei' => '2012-12-14',
      'Bulgaria' => '2013-02-20',
      'Burkina Faso' => '2013-03-20',
      'Burma' => '2013-02-21',
      'Burundi' => '2013-02-01',
      'Cambodia' => '2013-03-05',
      'Cameroon' => '2013-02-27',
      'Canada' => '2013-02-18',
      'Cape Verde' => '2013-02-04',
      'Cayman Islands' => '2012-12-21',
      'Central African Republic' => '2013-02-25',
      'Chad' => '2013-01-30',
      'Chile' => '2013-03-20',
      'China' => '2013-02-25',
      'Colombia' => '2013-03-21',
      'Comoros' => '2012-12-18',
      'Congo' => '2013-01-21',
      'Democratic Republic of Congo' => '2013-03-05',
      'Costa Rica' => '2013-03-13',
      'Côte d\'Ivoire' => '2013-01-22',
      'Croatia' => '2013-02-05',
      'Cuba' => '2013-03-19',
      'Curaçao' => '2013-01-16',
      'Cyprus' => '2013-03-21',
      'Czech Republic' => '2013-02-20',
      'Denmark' => '2013-01-18',
      'Djibouti' => '2013-03-04',
      'Dominica' => '2013-02-11',
      'Dominican Republic' => '2013-02-25',
      'Timor-Leste' => '2013-01-21',
      'Ecuador' => '2013-03-15',
      'Egypt' => '2013-03-18',
      'El Salvador' => '2013-02-05',
      'Equatorial Guinea' => '2013-01-10',
      'Eritrea' => '2013-01-30',
      'Estonia' => '2013-01-07',
      'Ethiopia' => '2013-02-28',
      'Falkland Islands' => '2013-02-26',
      'Fiji' => '2013-03-15',
      'Finland' => '2012-12-31',
      'France' => '2013-03-19',
      'French Guiana' => '2012-12-04',
      'French Polynesia' => '2012-12-04',
      'Gabon' => '2013-03-06',
      'Gambia' => '2013-03-06',
      'Georgia' => '2013-01-22',
      'Germany' => '2013-02-05',
      'Ghana' => '2013-03-20',
      'Gibraltar' => '2013-01-07',
      'Greece' => '2013-03-15',
      'Grenada' => '2013-02-11',
      'Guadeloupe' => '2012-12-04',
      'Guatemala' => '2013-03-13',
      'Guinea' => '2013-03-10',
      'Guinea-Bissau' => '2013-01-07',
      'Guyana' => '2013-01-07',
      'Haiti' => '2013-03-19',
      'Honduras' => '2013-02-26',
      'Hong Kong' => '2013-03-01',
      'Hungary' => '2013-02-28',
      'Iceland' => '2013-02-28',
      'India' => '2013-03-21',
      'Indonesia' => '2013-03-11',
      'Iran' => '2013-03-14',
      'Iraq' => '2013-03-20',
      'Ireland' => '2013-02-13',
      'Israel' => '2013-03-08',
      'Italy' => '2013-03-20',
      'Jamaica' => '2013-03-08',
      'Japan' => '2013-03-01',
      'Jordan' => '2013-03-21',
      'Kazakhstan' => '2013-02-18',
      'Kenya' => '2013-03-19',
      'Kiribati' => '2013-01-14',
      'South Korea' => '2013-03-12',
      'North Korea' => '2013-03-08',
      'Kosovo' => '2013-03-13',
      'Kuwait' => '2013-03-14',
      'Kyrgyzstan' => '2013-01-22',
      'Laos' => '2013-01-25',
      'Latvia' => '2013-03-14',
      'Lebanon' => '2013-02-22',
      'Lesotho' => '2012-12-21',
      'Liberia' => '2013-01-28',
      'Libya' => '2013-03-03',
      'Liechtenstein' => '2013-01-10',
      'Lithuania' => '2013-01-04',
      'Luxembourg' => '2012-12-19',
      'Macao' => '2012-12-14',
      'Macedonia' => '2013-03-14',
      'Madagascar' => '2013-02-21',
      'Malawi' => '2013-03-14',
      'Malaysia' => '2013-03-11',
      'Maldives' => '2013-03-13',
      'Mali' => '2013-03-20',
      'Malta' => '2013-03-20',
      'Marshall Islands' => '2012-12-12',
      'Martinique' => '2012-12-04',
      'Mauritania' => '2013-01-30',
      'Mauritius' => '2013-02-14',
      'Mayotte' => '2012-12-27',
      'Mexico' => '2013-03-13',
      'Micronesia' => '2012-12-31',
      'Moldova' => '2013-01-04',
      'Monaco' => '2012-12-27',
      'Mongolia' => '2013-03-04',
      'Montenegro' => '2013-01-15',
      'Montserrat' => '2012-12-19',
      'Morocco' => '2013-03-15',
      'Mozambique' => '2013-03-18',
      'Namibia' => '2013-01-10',
      'Nauru' => '2013-01-14',
      'Nepal' => '2013-02-06',
      'Netherlands' => '2013-01-24',
      'New Caledonia' => '2012-12-04',
      'New Zealand' => '2013-01-18',
      'Nicaragua' => '2013-02-15',
      'Niger' => '2013-03-20',
      'Nigeria' => '2013-03-19',
      'Norway' => '2013-03-20',
      'Oman' => '2013-01-29',
      'Pakistan' => '2013-03-21',
      'Palau' => '2012-12-20',
      'Panama' => '2013-03-21',
      'Papua New Guinea' => '2013-02-06',
      'Paraguay' => '2013-01-10',
      'Peru' => '2013-03-07',
      'Philippines' => '2013-03-06',
      'Pitcairn Island' => '2012-12-06',
      'Poland' => '2013-01-22',
      'Portugal' => '2013-01-21',
      'Qatar' => '2013-01-31',
      'Réunion' => '2013-01-04',
      'Romania' => '2013-03-14',
      'Russia' => '2013-03-13',
      'Rwanda' => '2013-02-11',
      'Samoa' => '2012-12-17',
      'San Marino' => '2013-03-21',
      'São Tomé and Principe' => '2012-12-05',
      'Saudi Arabia' => '2013-02-15',
      'Senegal' => '2013-02-26',
      'Serbia' => '2013-01-24',
      'Seychelles' => '2013-01-21',
      'Sierra Leone' => '2013-02-19',
      'Singapore' => '2013-02-06',
      'Slovakia' => '2013-01-11',
      'Slovenia' => '2013-03-08',
      'Solomon Islands' => '2013-02-07',
      'Somalia' => '2013-03-20',
      'South Africa' => '2013-02-21',
      'South Georgia and the South Sandwich Islands' => '2012-12-19',
      'South Sudan' => '2013-02-26',
      'Spain' => '2013-03-19',
      'Sri Lanka' => '2013-03-15',
      'St Helena, Ascension and Tristan da Cunha' => '2012-12-12',
      'St Kitts and Nevis' => '2013-02-11',
      'St Lucia' => '2013-01-18',
      'St Maarten' => '2012-12-19',
      'St Pierre & Miquelon' => '2012-12-04',
      'St Vincent and the Grenadines' => '2012-12-13',
      'Sudan' => '2013-02-07',
      'Suriname' => '2012-12-11',
      'Swaziland' => '2013-01-21',
      'Sweden' => '2013-01-18',
      'Switzerland' => '2013-01-21',
      'Syria' => '2013-03-14',
      'Taiwan' => '2012-12-20',
      'Tajikistan' => '2013-02-07',
      'Tanzania' => '2013-02-15',
      'Thailand' => '2013-03-14',
      'Togo' => '2013-02-04',
      'Tonga' => '2013-01-30',
      'Trinidad and Tobago' => '2013-01-30',
      'Tunisia' => '2013-03-18',
      'Turkey' => '2013-03-20',
      'Turkmenistan' => '2013-02-07',
      'Turks and Caicos Islands' => '2013-03-18',
      'Tuvalu' => '2013-01-14',
      'Uganda' => '2013-03-05',
      'Ukraine' => '2013-02-22',
      'United Arab Emirates' => '2013-02-21',
      'USA' => '2013-03-06',
      'Uruguay' => '2013-02-20',
      'Uzbekistan' => '2013-01-22',
      'Vanuatu' => '2013-01-14',
      'Venezuela' => '2013-03-13',
      'Vietnam' => '2013-03-11',
      'Wallis and Futuna' => '2012-12-04',
      'Western Sahara' => '2013-02-05',
      'Yemen' => '2013-02-19',
      'Zambia' => '2013-03-20',
      'Zimbabwe' => '2013-03-15',
    }.each do |country_name, date|
      country = Country.all.select {|c| c.name == country_name }.first
      unless country
        puts "Couldn't find country for #{country_name}"
        next
      end
      if ed = TravelAdviceEdition.published.where(:country_slug => country.slug).first
        ed.published_at = Date.parse(date)
        ed.save!(:validate => false)
      else
        puts "No published edition found for #{country_name}"
      end
    end
  end
end
